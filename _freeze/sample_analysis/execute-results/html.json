{
  "hash": "82576ffb34db09d40b5b816c950c6a33",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Example Analysis\"\n\nformat: \n    html:\n        bibliography: citation.bib\n        codetools: true\n        code-block-border-left: \"#31BAE9\"\n        code-block-bg: whitesmoke\neditor:\n    render-on-save: true\n\ncallout-appearance: simple\ndate: last-modified\n---\n\n\n\n\n# Introduction\n\n![Picture of NBA players](https://e00-marca.uecdn.es/assets/multimedia/imagenes/2022/02/21/16454165955921.jpg)\n\n### Goal of This Project\nThe project aims to give an exploratory data analysis for the research question that what factors are associated with the performance of NBA players with respect to their Value over Replacement Players (VORP) and the All-Star status.\n\n### Intended Audience\nThe intended audience are anyone who enjoy watching NBA games!\n\n### Data\nThis data was taken from the Kaggle data set, [NBA Season Statistics 1958 -2017](https://www.kaggle.com/datasets/tanamwololo/nba-season-statistics-1958-2017) [@nba_stat].\n\n::: {.callout-note}\nI have manually taken a subset with Year 2014 -2016 and added a column indicating whether the player was an All-Star player.\n:::\n\n### Data Dictionary\n\n| Variable         | Description                                    |\n|------------------|------------------------------------------------|\n| Pos              | Player's Position (PG, SG, SF, PF, C)    |\n| Age              | Age of the Player |\n| Tm               | Team of the Player                    |\n| ALL_STAR         | The All Star Status of the player              |\n| VORP             | Player's Value over Replacement Player statistics  |\n|G                 | Number of Games the Player Played  |\n\n### What is the Value over Replacement Player and All-Star?\nTo understand the idea of Value over Replacement Player, I need to first introduce Box Plus Minus.\nBox Plus Minus is a basketball box score-based metric that estimates a basketball player’s contribution to the team when that player is on the court. It takes into account the player’s box score information (games played, field goal percentage, assists, rebound, etc), position, and the team’s overall performance to estimate the player’s contribution in points above the league average per 100 possessions played [@BPM].\nThe league average is defined as 0.0 and a value of +5.0 means the team is 5 points per 100 possessions better with the player on the floor than with average production from another player.\n\nValue over Replacement Player converts the BPM rate into an estimate of each player's overall contribution to the team, measured versus what a theoretical \"replacement player\" would provide [@VORP]. \nA replacement player is one with a performance at \"replacement level,\" the level of performance an average team can expect when trying to replace a player at a minimal cost. That is to say, the player is on the periphery of the league. \nBy design, the player of the replacement level has a VORP of -2.0.\n\n::: {.column-margin}\n![Histogram of BPM](pics\\bpm.png)\n:::\n\nThe National Basketball Association (NBA) All-Star Game is an annual exhibition basketball game featuring two teams of twelve composed of all of the top-ranked players from the Eastern and Western Conferences. The All-Star players are the ones being accepted to be the influential players in that season.\n\n\n\n\n\n\n\n\n\n\n\n\n# Data Cleaning\n\n### Excluding the unrepresentative data\nFirstly, there are players that played few games during a season and therefore the reported VORP might not reflect their true performance on court. So, I exclude those players.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnba_0 <- nba_15_16 %>% dplyr::select(c('Pos', \"Age\", \"Tm\", \"ALL_STAR\", \"VORP\", \"G\"))\nnba_0 <-  nba_0 %>% filter(G > 20)\n```\n:::\n\n\n\n\n### Tidying the Position Variable\nSecondly, most of the values of 'Pos' variable in this data are either \"C\", \"PF\", \"SF\", \"SG\", or \"PG\". However, some have a mix of the two, like \"PG-SG\". But as they are a tiny part of the data, I will exclude them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnba_1 <-  nba_0 %>% filter(Pos %in% c('C', 'PF', 'SF', 'SG', 'PG'))\n\nnba_pos_count <- nba_1 %>%\n  count(Pos, name = \"Count\") %>%\n  arrange(desc(Count))\n\nggplot(nba_pos_count, aes(x = reorder(Pos, Count), y = Count, fill = Pos)) +\n  geom_bar(stat = \"identity\") +\n  labs(\n    title = \"Distribution of Player Positions\",\n    subtitle = \"Center position has the fewest players, while pointguard has the most\",\n    x = \"Player Position\",\n    y = \"Number of Players\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  geom_text(aes(label = Count), vjust = -0.5)\n```\n\n::: {.cell-output-display}\n![](sample_analysis_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n::: {.callout-tip}\n## Why I drop rows?\nMost of the values of 'Pos' variable in this data are either \"C\", \"PF\", \"SF\", \"SG\", or \"PG\". However, some have a mix of the two, like \"PG-SG\". But as they are a tiny part of the data, I will exclude them.\n:::\n\n\n### Collapsing the Team Variable\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnba_basic <- nba_1 %>%\n  mutate(region = forcats::fct_collapse(Tm,\n                                        Pacific = c(\"LAL\",\"GSW\",\"LAC\",\"PHO\",\"SAC\"),\n                                        Northwest = c(\"UTA\",\"MIN\",\"OKC\",\"POR\",\"DEN\"),\n                                        Southwest = c(\"DAL\",\"SAS\",\"HOU\",\"NOP\",\"MEM\"),\n                                        Central = c(\"DET\",\"CLE\",\"MIL\",\"CHI\",\"IND\"),\n                                        Southeast = c(\"MIA\",\"WAS\",\"CHO\",\"ORL\",\"ATL\"),\n                                        Atlantic = c(\"NYK\",\"TOR\",\"BOS\",\"PHI\",\"BRK\"))) %>%\n  dplyr::select(-Tm) \n\nnba_basic$region <- as.factor(nba_basic$region)\n\nnba_region_count <- nba_basic %>%\n  count(region, name = \"Count\") %>%\n  arrange(desc(Count))\n\nggplot(nba_region_count, aes(x = reorder(region, Count), y = Count, fill = region)) +\n  geom_bar(stat = \"identity\") +\n  labs(\n    title = \"Distribution of Player From Different Regions\",\n    subtitle = \"TOT represents the players played for more than one team that season (being traded).\",\n    x = \"Region\",\n    y = \"Number of Players\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  geom_text(aes(label = Count), vjust = -0.5)\n```\n\n::: {.cell-output-display}\n![](sample_analysis_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n::: {.callout-tip}\n## Why I collapse variables?\nI collapse the team variable into region, indicating which division the team is in.\n:::\n\n# Exploratory Data Analysis\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nba_basic, aes(x = ALL_STAR, fill = Pos)) +\n  geom_bar(position = 'fill') +\n  labs(\n    x = \"All Star\",\n    y = \"Proportion\",\n    title = \"Proportion of Players by Position in All-Star Games\",\n    subtitle = \"The proportion of All-Star players between all positions is quite even\",\n    fill = \"Position\"\n  ) +\n  scale_y_continuous(labels = percent_format()) +  \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](sample_analysis_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nba_basic, aes(x = ALL_STAR, fill = region)) +\n  geom_bar(position = 'fill') +\n  labs(\n    x = \"All Star\",\n    y = \"Proportion\",\n    title = \"Proportion of Players by Region in All-Star Games\",\n    subtitle = \"TOT represents the players played for more than one team that season (being traded).\",\n    fill = \"Position\"\n  ) +\n  scale_y_continuous(labels = percent_format()) +  \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](sample_analysis_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\nIt shows that there were more players selected to be All-Star in the Southeast and the Pacific divisions. TOT represents that the player played for more than one team that season (being traded), and no such player was selected to be All-Star.\n\n### The Outcome, VORP\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = nba_basic, aes(x = Age, y = VORP)) +\n  facet_wrap(~ ALL_STAR, ncol = 2) +  \n  geom_point(aes(color = ALL_STAR), size = 2, alpha = 0.7) + \n  geom_smooth(aes(linetype = ALL_STAR, color = ALL_STAR), se = FALSE, method = \"loess\") +  \n  labs(\n    title = \"VORP by Age, Faceted by All-Star Status\",\n    subtitle = \"Players with higher VORP values typically have age at around 25 - 30\",\n    x = \"Age\", y = \"VORP\",\n    color = \"All-Star Status\",\n    linetype = \"All-Star Status\"\n  )  +\n  scale_color_manual(values = c(\"blue\", \"red\")) +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  scale_linetype_manual(values = c(\"solid\", \"dashed\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](sample_analysis_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nba_basic,aes (x=Pos,y=VORP,fill=ALL_STAR)) + \n  facet_wrap(~ ALL_STAR) + \n  geom_boxplot(outlier.size = 2) + \n  labs(title = \"VORP by Position, Faceted by All-Star Status\", \n       subtitle = \"Power Forward has the highest mean VORP\",\n  x = \"Position\", y = \"VORP\")+\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](sample_analysis_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n\nThe boxplots show the VORP of players that play different positions.\n\n# Summary\nThis exploratory data analysis gives a preview about the distribution NBA players' position, the division they're in, and how their performances (evaluated by the VORP statistics and all-star status) may be associated with certain factors. From the plots, we see that there were more players selected to be All-Star in the Southeast and the Pacific divisions, meaning that these two divisions were likely to be more competitive than the others. Also, none of the players that were being traded were selected to be All-Star, since good players are less likely to be traded.\n\nThe scatter plot shows that the age might affect the VORP statistics, and players with higher VORP values typically have age at around 25 - 30. The boxplot shows the All-Star players have significantly higher VORP values for all five positions.\n\nWith these observations, machine learning models can be fitted to the data to draw more in-depth conclusions.\n\n# Functions Used\n\n- **dplyr** and **tidyr**: `select`, `filter`, `mutate`, `count`, `arrange`.\n- **ggplot2**: `geom_bar`, `geom_boxplot`, `geom_line`, `geom_point`, `facet_wrap`\n\n",
    "supporting": [
      "sample_analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}